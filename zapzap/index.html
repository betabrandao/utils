<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Beta Brandao">
    <meta name="generator" content="VIM">
    <title>Fast chat</title>


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/intl-tel-input@16.0.3/build/css/intlTelInput.min.css" rel="stylesheet" crossorigin="anonymous">

    <!-- Favicons -->
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/favicons/manifest.json">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#712cf9">
<link rel="icon" href="/favicons/favicon.ico">
<meta name="theme-color" content="#712cf9">


    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }
      /*
 * Globals
 */


/* Custom default button */
.btn-light,
.btn-light:hover,
.btn-light:focus {
  color: #333;
  text-shadow: none; /* Prevent inheritance from `body` */
}


/*
 * Base structure
 */

body {
  text-shadow: 0 .05rem .1rem rgba(0, 0, 0, .5);
  box-shadow: inset 0 0 5rem rgba(0, 0, 0, .5);
}

.text {
 color: black;
}

.cover-container {
  max-width: 42em;
}


/*
 * Header
 */

.nav-masthead .nav-link {
  color: rgba(255, 255, 255, .5);
  border-bottom: .25rem solid transparent;
}

.nav-masthead .nav-link:hover,
.nav-masthead .nav-link:focus {
  border-bottom-color: rgba(255, 255, 255, .25);
}

.nav-masthead .nav-link + .nav-link {
  margin-left: 1rem;
}

.nav-masthead .active {
  color: #fff;
  border-bottom-color: #fff;
}
    </style>

    
    <!-- Custom styles for this template -->
  </head>
  <body class="d-flex h-100 text-center text-bg-dark">
    
<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
  <header class="mb-auto">
    <div>
      <h3 class="float-md-start mb-0">Fast Chat</h3>
      <nav class="nav nav-masthead justify-content-center float-md-end">
        <a class="nav-link fw-bold py-1 px-0 active" aria-current="page" href="#">Home</a>
        <a class="nav-link fw-bold py-1 px-0" href="#">Contact</a>
      </nav>
    </div>
  </header>

  <main class="px-3">
    <h1>Fast Chat</h1>
    <form action="#" class="needs-validation" novalidate>
  <div class="form-group ml-2 mt-2">

    <input type="tel" id="phone" class="text tel-input" required="required" name="phone" pattern="^[0-9]+$">
    <h6 class="invalid-feedback"></h6>
  </div>

<div class="form-group mt-2">
  <button id="save" class="btn btn-lg btn-light fw-bold border-white bg-white" type="submit">Iniciar Conversa</button>
</div>
</form>
  </main>

  <footer class="mt-auto text-white-50">
    <p class="lead">Este template usa a URL whatsapp://send/?phone=XXXXX para abrir o WhatsApp app no celular somente.</p>
    <p>WhatsApp é uma marca registrada da Meta. Não nos responsabilizamos pelo mal uso deste web app. Não guardamos nenhum dado. Não damos suporte.</p>
  </footer>
</div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@16.0.3/build/js/intlTelInput.min.js"></script>
<script> 
var input = document.querySelector("#phone");
var iti = window.intlTelInput(input, {
  utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@16.0.3/build/js/utils.js",
  initialCountry: "auto",
  geoIpLookup: function(success, failure) {
    $.get("https://ipinfo.io", function() {}, "jsonp").always(function(resp) {
      var countryCode = (resp && resp.country) ? resp.country : "us";
      success(countryCode);
    });
  },
});

window.iti = iti
</script>

<script> 
(function ($) {

 $('form').on('submit', function(e) {
   e.preventDefault();
   e.stopPropagation();

   let form = $(this).get(0);
   $('form').addClass('was-validated');

   //Need to display invalid feedback explicitly on submit for input fields due to plugin changing structure
   $('form .tel-input').each(function() {
       let telInput = $(this).get(0);
       if($(this).prop('required') && !telInput.checkValidity()) {
         $(this).parents('.form-group').find('.invalid-feedback').show();
       }
     });

   });
  
  input.addEventListener("countrychange", function() {
    let isValidNumber = iti.isValidNumber();
    checkPhoneValidation($(this), isValidNumber);
  });

  $('form').on('keyup', '.tel-input', function (event) {
    let isValidNumber = iti.isValidNumber();
    checkPhoneValidation($(this), isValidNumber);
  });
     
})(jQuery);  

function checkPhoneValidation(element, isValidNumber)
{

  let invFeedbackDiv = element.parents('.form-group').find('.invalid-feedback');
  input = element.get(0);

      if(isValidNumber) {
        //need to set this first as otherwise input validity is falsely linking to custom error
        input.setCustomValidity('');
        invFeedbackDiv.html(input.value);
    }
  
  if(isValidNumber && input.validity.valid) {
    // whatsapp://send/?phone=5535987080608&text&type=phone_number&app_absent=0
    input.setCustomValidity(window.iti.getSelectedCountryData().dialCode + input.value);
    invFeedbackDiv.hide();
  } else {
    invFeedbackDiv.html('Invalid phone number');
    input.setCustomValidity('Insira somente numeros');

    if($('form').hasClass('was-validated')) {
      invFeedbackDiv.show();
    }
  } 
  
}

</script>

  </body>
</html>
